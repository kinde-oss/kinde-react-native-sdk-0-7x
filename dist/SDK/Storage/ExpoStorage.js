var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var SecureStore=_interopRequireWildcard(require("expo-secure-store"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var ExpoStorage=function(_getItem,_setItem,_clear){function ExpoStorage(){(0,_classCallCheck2["default"])(this,ExpoStorage);}(0,_createClass2["default"])(ExpoStorage,[{key:"getItem",value:function getItem(){return(_getItem=_getItem||(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var access_token,expires_in,id_token,refresh_token;return _regenerator["default"].wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return SecureStore.getItemAsync('kinde_access_token');case 2:access_token=_context.sent;_context.next=5;return SecureStore.getItemAsync('kinde_expires_in');case 5:expires_in=_context.sent;_context.next=8;return SecureStore.getItemAsync('kinde_id_token');case 8:id_token=_context.sent;_context.next=11;return SecureStore.getItemAsync('kinde_refresh_token');case 11:refresh_token=_context.sent;return _context.abrupt("return",JSON.stringify({access_token:access_token,expires_in:expires_in,id_token:id_token,refresh_token:refresh_token}));case 13:case"end":return _context.stop();}},_callee);}))).apply(this,arguments);}},{key:"setItem",value:function setItem(_x){return(_setItem=_setItem||(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(value){var _ref,access_token,expires_in,id_token,refresh_token;return _regenerator["default"].wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_ref=typeof value==='string'?JSON.parse(value):value,access_token=_ref.access_token,expires_in=_ref.expires_in,id_token=_ref.id_token,refresh_token=_ref.refresh_token;_context2.next=3;return SecureStore.setItemAsync('kinde_access_token',String(access_token));case 3:_context2.next=5;return SecureStore.setItemAsync('kinde_expires_in',String(expires_in));case 5:_context2.next=7;return SecureStore.setItemAsync('kinde_id_token',String(id_token));case 7:_context2.next=9;return SecureStore.setItemAsync('kinde_refresh_token',String(refresh_token));case 9:return _context2.abrupt("return",true);case 10:case"end":return _context2.stop();}},_callee2);}))).apply(this,arguments);}},{key:"clear",value:function clear(){return(_clear=_clear||(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return SecureStore.deleteItemAsync('kinde_access_token');case 2:_context3.next=4;return SecureStore.deleteItemAsync('kinde_expires_in');case 4:_context3.next=6;return SecureStore.deleteItemAsync('kinde_id_token');case 6:_context3.next=8;return SecureStore.deleteItemAsync('kinde_refresh_token');case 8:return _context3.abrupt("return",true);case 9:case"end":return _context3.stop();}},_callee3);}))).apply(this,arguments);}}]);return ExpoStorage;}();exports["default"]=ExpoStorage;